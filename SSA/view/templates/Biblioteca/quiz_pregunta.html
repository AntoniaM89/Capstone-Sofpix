<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Preguntas del Quiz</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

    <h1>ðŸ§© Preguntas del Quiz #{{ quiz_id }}</h1>

    <a href="{{ url_for('quiz_controller.gestionar_quizzes') }}">â¬… Volver a la lista de quizzes</a>
    <hr>

    <!-- === AGREGAR NUEVA PREGUNTA === -->
    <section>
        <h2>Agregar pregunta</h2>
        <form method="POST" action="{{ url_for('quiz_pregunta_controller.gestionar_preguntas', quiz_id=quiz_id) }}">
            <label for="pregunta">Pregunta:</label><br>
            <input type="text" name="pregunta" required><br><br>

            <label for="img_id">Imagen (desde biblioteca):</label><br>
            <select name="img_id">
                <option value="">-- Sin imagen --</option>
                {% for archivo in archivos %}
                    <option value="{{ archivo['ID'] }}">{{ archivo['Nombre'] }}.{{ archivo['Tipo'] }}</option>
                {% endfor %}
            </select><br><br>

            <label>Opciones:</label><br>
            A) <input type="text" name="opcion_a" required><br>
            B) <input type="text" name="opcion_b" required><br>
            C) <input type="text" name="opcion_c"><br>
            D) <input type="text" name="opcion_d"><br><br>

            <label for="respuesta_correcta">Respuesta Correcta:</label><br>
            <select name="respuesta_correcta" required>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
            </select><br><br>

            <button type="submit">Agregar Pregunta</button>
        </form>
    </section>

    <hr>

    <!-- === LISTAR PREGUNTAS EXISTENTES === -->
    <section>
        <h2>Preguntas actuales</h2>
        {% if preguntas %}
            <ol>
                {% for p in preguntas %}
                    <li>
                        <strong>{{ p['PREGUNTA'] }}</strong><br>
                        {% if p['IMAGEN'] %}
                            <p>{{ p['IMAGEN'] }}</p>
                        {% endif %}
                        <ul>
                            <li>A: {{ p['OPCION_A'] }}</li>
                            <li>B: {{ p['OPCION_B'] }}</li>
                            {% if p['OPCION_C'] %}<li>C: {{ p['OPCION_C'] }}</li>{% endif %}
                            {% if p['OPCION_D'] %}<li>D: {{ p['OPCION_D'] }}</li>{% endif %}
                        </ul>
                        <em>Respuesta Correcta: {{ p['RESPUESTA_CORRECTA'] }}</em><br>

                        <form method="POST" action="{{ url_for('quiz_pregunta_controller.eliminar_pregunta', quiz_id=quiz_id, id_pregunta=p['ID']) }}" style="display:inline;">
                            <button type="submit" onclick="return confirm('Â¿Eliminar esta pregunta?')">Eliminar</button>
                        </form>
                    </li>
                {% endfor %}
            </ol>
        {% else %}
            <p>No hay preguntas registradas aÃºn.</p>
        {% endif %}
    </section>

</body>
</html>
